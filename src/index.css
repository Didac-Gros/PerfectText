@import "tailwindcss/preflight";
@tailwind utilities;
@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

@layer utilities {
  .perspective-1000 {
    perspective: 1000px;
  }
  
  .backface-hidden {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
}

/* Concept Map Styles */
.node {
  cursor: pointer;
  transition: all 0.2s ease;
}

.node:hover circle {
  fill: #059669 !important;
  filter: brightness(1.1);
  transform: scale(1.2);
}

.node:hover text {
  font-weight: 500;
}

.node:hover rect {
  stroke: #10b981;
  stroke-width: 1px;
}

.link {
  transition: all 0.2s ease;
}

.link:hover {
  stroke-width: 2px !important;
  opacity: 0.8 !important;
}

/* Custom scrollbar */
.overflow-x-auto::-webkit-scrollbar {
  height: 8px;
}

.overflow-x-auto::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

.overflow-x-auto::-webkit-scrollbar-thumb {
  background: #94a3b8;
  border-radius: 4px;
}

.overflow-x-auto::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}



@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@theme {
    --color-primary-50: #f0f9ff;
    --color-primary-100: #e0f2fe;
    --color-primary-200: #bae6fd;
    --color-primary-300: #7dd3fc;
    --color-primary-400: #38bdf8;
    --color-primary-500: #0ea5e9;
    --color-primary-600: #0284c7;
    --color-primary-700: #0369a1;
    --color-primary-800: #075985;
    --color-primary-900: #0c4a6e;
}

@layer base {
  * {
    @reference border-border;
  }
  body {
    @reference bg-background text-foreground;
  }
  button {
    cursor: pointer;
  }
  textarea {
    outline: none;
  }
}

/* Calendar Container */
.fc {
  @reference h-[calc(100vh-12rem)] max-h-[800px] bg-white dark:bg-gray-800 rounded-2xl 
         shadow-lg border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm
         overflow-hidden;
}

/* Header Toolbar */
.fc-header-toolbar {
  @reference px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 
         dark:from-gray-800 dark:to-gray-900 border-b border-gray-200 dark:border-gray-700;
}

.fc-toolbar-title {
  @reference text-xl font-semibold bg-gradient-to-r from-gray-900 to-gray-600 
         dark:from-white dark:to-gray-300 bg-clip-text text-transparent;
}

.fc-button-group {
  @reference bg-white dark:bg-gray-700 rounded-lg p-1 shadow-sm;
}

.fc-button-primary {
  @reference px-4 py-2 text-sm font-medium rounded-lg border-0 
         transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-600
         disabled:opacity-50 disabled:cursor-not-allowed
         focus:outline-none focus:ring-2 focus:ring-primary-400/60 !important;
}

.fc-button-primary:not(:disabled).fc-button-active {
  @reference bg-primary-500 text-white hover:bg-primary-600 !important;
}

/* Week/Day View Grid */
.fc-timegrid {
  @reference bg-white dark:bg-gray-800;
}

.fc-timegrid-slot {
  @reference border-gray-100 dark:border-gray-800;
  height: var(--fc-timegrid-slot-height, 3rem) !important;
  transition: height 0.2s ease-out;
}

.fc-timegrid-slot-label {
  @reference text-xs font-medium text-gray-500 dark:text-gray-400 pl-3;
}

/* Weekend Colors */
.fc-day-sat, .fc-day-sun {
  @reference bg-gray-100 dark:bg-gray-700/80 !important;
}

.fc-day-sat .fc-daygrid-day-frame, 
.fc-day-sun .fc-daygrid-day-frame {
  @reference bg-gray-100 dark:bg-gray-700/80 !important;
}

.fc-day-sat .fc-col-header-cell-cushion, 
.fc-day-sun .fc-col-header-cell-cushion {
  @reference text-gray-500 dark:text-gray-400;
}

/* Time Indicator */
.fc-timegrid-now-indicator-line {
  @reference border-primary-500 border-2 z-10;
}

.fc-timegrid-now-indicator-arrow {
  @reference border-primary-500 hidden;
}

/* Events */
.fc-event {
  @reference rounded-xl border-0 shadow-lg transition-all duration-300 
         backdrop-blur-sm hover:scale-[1.02] hover:-translate-y-0.5 
         hover:shadow-xl cursor-pointer !important;
}

.fc-timegrid-event {
  @reference min-h-[40px] !important;
}

.fc-event-main {
  @reference p-3 rounded-xl bg-gradient-to-br;
}

/* Event Colors */
.fc-event.blue-event .fc-event-main {
  @reference from-blue-500 to-blue-600 text-white;
}

.fc-event.green-event .fc-event-main {
  @reference from-emerald-500 to-emerald-600 text-white;
}

.fc-event.purple-event .fc-event-main {
  @reference from-purple-500 to-purple-600 text-white;
}

.fc-event.yellow-event .fc-event-main {
  @reference from-amber-500 to-amber-600 text-white;
}

.fc-event.red-event .fc-event-main {
  @reference from-red-500 to-red-600 text-white;
}

/* Event Content */
.fc-event-time {
  @reference text-xs font-semibold mb-1 opacity-90;
}

.fc-event-title {
  @reference text-sm font-medium line-clamp-2;
}

/* Week Header */
.fc-col-header {
  @reference bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700;
}

.fc-col-header-cell {
  @reference py-4 !important;
}

.fc-col-header-cell-cushion {
  @reference flex flex-col items-center;
}

.fc-day-name {
  @reference text-sm font-medium text-gray-500 dark:text-gray-400 mb-1;
}

.fc-day-number {
  @reference text-2xl font-bold text-gray-900 dark:text-white;
}

/* Today Highlight */
.fc-day-today {
  @reference bg-primary-50/30 dark:bg-primary-900/20 !important;
}

.fc-day-today .fc-col-header-cell-cushion {
  @reference text-primary-600 dark:text-primary-400;
}

/* Month View */
.fc-daygrid-day {
  @reference transition-colors duration-200 hover:bg-gray-50 dark:hover:bg-gray-700/50;
}

.fc-daygrid-day-frame {
  @reference h-32 p-1 !important;
}

.fc-daygrid-day-top {
  @reference flex justify-center text-sm font-medium;
}

.fc-daygrid-day-number {
  @reference w-8 h-8 flex items-center justify-center rounded-full 
         hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors;
}

.fc-day-today .fc-daygrid-day-number {
  @reference bg-primary-500 text-white;
}

/* Month View Events */
.fc-daygrid-event-harness {
  @reference hidden;
}

.fc-daygrid-day-events {
  @reference !visible !important;
  @reference absolute bottom-2 right-2 flex flex-col items-end;
}

.fc-daygrid-day-bottom {
  @reference mt-0 !important;
}

.fc-daygrid-more-link {
  @reference hidden !important;
}

.fc-daygrid-event-dot {
  @reference hidden !important;
}

/* Event Counter Badge */
.event-counter {
  @reference flex items-center justify-center px-3 py-1.5 text-xs font-medium 
         bg-primary-500/90 text-white rounded-full shadow-sm backdrop-blur-sm
         hover:bg-primary-600 transition-all duration-200 cursor-pointer
         hover:scale-105 hover:shadow-md transform-gpu;
}

/* Event Popup */
.event-popup {
  @reference absolute z-50 w-72 bg-white dark:bg-gray-800 rounded-xl shadow-xl 
         border border-gray-200 dark:border-gray-700 p-3 transform -translate-x-full
         backdrop-blur-sm;
}

.event-popup-list {
  @reference space-y-2 max-h-64 overflow-y-auto scrollbar-thin 
         scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600;
}

.event-popup-item {
  @reference flex items-center space-x-3 p-2.5 rounded-lg hover:bg-gray-50 
         dark:hover:bg-gray-700/50 transition-all duration-200 cursor-pointer
         hover:scale-[1.02] transform-gpu;
}

/* List View */
.fc-list {
  @reference bg-white dark:bg-gray-800 rounded-xl overflow-hidden;
}

.fc-list-day {
  @reference bg-gray-50 dark:bg-gray-700/50;
}

.fc-list-event {
  @reference hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer;
}

.fc-list-event-dot {
  @reference hidden;
}

/* Update the time column styles */
.fc-list-event-time {
  @reference text-base font-medium text-gray-600 dark:text-gray-300 pl-8 !important;
  min-width: 160px !important;
}

.fc-list-event-title {
  @reference text-sm font-medium;
}

/* Scrollbars */
.fc-scroller {
  @reference scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600
         scrollbar-track-transparent;
}

/* All-day Events */
.fc-timegrid-axis-cushion {
  @reference text-xs font-medium text-gray-500 dark:text-gray-400 pl-3;
}

.fc-timegrid-slot-label-frame {
  @reference text-right pr-3;
}

/* Completed Events */
.fc-event.completed-event {
  @reference opacity-75 grayscale;
}

.fc-event.completed-event .fc-event-title {
  @reference line-through;
}

/* Task Complete Button */
.task-complete-button {
  @reference transform transition-all duration-300;
}

.task-complete-button:hover {
  @reference scale-110 ring-4 ring-offset-2 ring-offset-white dark:ring-offset-gray-800;
}

.task-complete-button:active {
  @reference scale-95;
}

.task-complete-button.completed {
  @reference ring-green-500/50;
  animation: completedPulse 0.3s ease-in-out;
}

/* Animations */
@keyframes eventPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

@keyframes completedPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.fc-event.new-event {
  animation: eventPulse 0.6s ease-in-out;
}

/* Responsive Adjustments */
@media (max-width: 640px) {
  .fc-toolbar-title {
    @reference text-lg;
  }
  
  .fc-day-number {
    @reference text-xl;
  }
  
  .fc-event-time, .fc-event-title {
    @reference text-xs;
  }
}